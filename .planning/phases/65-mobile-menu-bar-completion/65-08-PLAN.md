# Plan 65-08: Deployment & Documentation

---

**wave:** 3
**depends_on:** [65-01, 65-02, 65-03, 65-04, 65-05, 65-06]
**files_modified:**
  - mobile/.env.example
  - mobile/app.config.js
  - mobile/eas.json
  - mobile/README.md
  - menubar/package.json
  - menubar/src-tauri/tauri.conf.json
  - docs/MOBILE_DEPLOYMENT.md
  - docs/MENUBAR_DEPLOYMENT.md
  - docs/MOBILE_USER_GUIDE.md
  - .github/workflows/mobile-ci.yml
**autonomous:** true

---

## Overview

Prepare the mobile app and menu bar app for deployment with comprehensive documentation, CI/CD pipelines, and distribution configurations for iOS (TestFlight), Android (Google Play Internal), and macOS (Homebrew).

**Existing Assets:**
- Basic mobile app structure
- Basic menu bar app structure
- Existing docs directory

**To Be Created:**
- Deployment configurations (EAS, TestFlight, Google Play)
- CI/CD pipelines for mobile and menu bar
- Homebrew formula for menu bar
- Comprehensive documentation
- Release notes templates

---

## Tasks

### Task 01: Configure Mobile Build Settings

Set up all necessary configuration files for iOS and Android builds.

**Files:**
- `mobile/app.config.js`
- `mobile/eas.json`
- `mobile/.env.example`
- `mobile/android/keystore.properties.example`

**Requirements:**
- EAS Build configuration for iOS and Android
- Build variants (development, staging, production)
- Environment variable configuration
- CodePush setup for over-the-air updates
- App signing configuration
- Versioning strategy
- Bundle identifiers
- Deep link configuration

**Acceptance Criteria:**
- [ ] EAS configuration complete
- [ ] All build variants configured
- [ ] Environment variables documented
- [ ] CodePush integrated
- [ ] App signing configured
- [ ] Versioning strategy defined
- [ ] Bundle identifiers set
- [ ] Deep links work

---

### Task 02: Create Mobile CI/CD Pipeline

Set up GitHub Actions workflow for mobile app building and testing.

**File:** `.github/workflows/mobile-ci.yml`

**Requirements:**
- Trigger on push to main and PRs
- Run tests on all platforms
- Build iOS development build
- Build Android development build
- Run linting and type checking
- Generate test coverage report
- Upload build artifacts
- Notify on build failure
- Deploy to TestFlight (on tag)
- Deploy to Google Play Internal (on tag)

**Acceptance Criteria:**
- [ ] Workflow triggers correctly
- [ ] Tests run on all platforms
- [ ] Builds complete successfully
- [ ] Linting and type checking pass
- [ ] Coverage report generates
- [ ] Artifacts uploaded
- [ ] Notifications work
- [ ] TestFlight deployment works
- [ ] Google Play deployment works

---

### Task 03: Create Menu Bar CI/CD Pipeline

Set up GitHub Actions workflow for menu bar app building and release.

**File:** `.github/workflows/menubar-ci.yml`

**Requirements:**
- Trigger on push to main and PRs
- Run tests
- Build for macOS (Intel and Apple Silicon)
- Build for Windows
- Code signing for macOS
- Notarization for macOS
- Create GitHub release
- Upload release assets
- Auto-update configuration

**Acceptance Criteria:**
- [ ] Workflow triggers correctly
- [ ] Tests run and pass
- [ ] macOS builds succeed (both architectures)
- [ ] Windows build succeeds
- [ ] Code signing works
- [ ] Notarization completes
- [ ] Release creates automatically
- [ ] Assets uploaded correctly
- [ ] Auto-update configured

---

### Task 04: Create Homebrew Formula

Create a Homebrew formula for easy installation of the menu bar app.

**File:** `menubar/Formula/atom-menubar.rb`

**Requirements:**
- Formula with version and SHA256
- Installation instructions
- Dependencies listed
- Test block for verification
- Bottle support for binaries
- Auto-update from GitHub releases
- Caveats for additional setup

**Acceptance Criteria:**
- [ ] Formula installs correctly
- [ ] All dependencies included
- [ ] Test block verifies installation
- [ ] Bottles created for releases
- [ ] Auto-update works
- [ ] Caveats provide useful info

---

### Task 05: Create Mobile Deployment Documentation

Create comprehensive documentation for mobile app deployment.

**File:** `docs/MOBILE_DEPLOYMENT.md`

**Requirements:**
- Prerequisites (Node, Expo, EAS CLI)
- Environment setup instructions
- Build configuration guide
- TestFlight deployment process
- Google Play deployment process
- CodePush deployment process
- Troubleshooting section
- Release checklist
- Rollback procedures

**Acceptance Criteria:**
- [ ] Prerequisites documented
- [ ] Setup instructions clear
- [ ] Build process documented
- [ ] TestFlight process explained
- [ ] Google Play process explained
- [ ] CodePush process documented
- [ ] Troubleshooting covers common issues
- [ ] Release checklist comprehensive
- [ ] Rollback procedures clear

---

### Task 06: Create Menu Bar Deployment Documentation

Create comprehensive documentation for menu bar app deployment.

**File:** `docs/MENUBAR_DEPLOYMENT.md`

**Requirements:**
- Prerequisites (Rust, Node, Tauri CLI)
- Build instructions for macOS and Windows
- Code signing guide
- Notarization process
- Homebrew tap setup
- Auto-update configuration
- Release process
- Troubleshooting section

**Acceptance Criteria:**
- [ ] Prerequisites documented
- [ ] Build instructions work
- [ ] Code signing explained
- [ ] Notarification process clear
- [ ] Homebrew setup documented
- [ ] Auto-update configured
- [ ] Release process defined
- [ ] Troubleshooting helpful

---

### Task 07: Create Mobile User Guide

Create user-facing documentation for the mobile app.

**File:** `docs/MOBILE_USER_GUIDE.md`

**Requirements:**
- Getting started section
- Authentication guide
- Chat feature explanation
- Canvas viewing guide
- Workflow execution guide
- Settings and preferences
- Offline mode explanation
- Troubleshooting for users
- FAQ section

**Acceptance Criteria:**
- [ ] Getting started clear
- [ ] Auth guide comprehensive
- [ ] Chat feature explained
- [ ] Canvas guide helpful
- [ ] Workflow guide complete
- [ ] Settings documented
- [ ] Offline mode explained
- [ ] Troubleshooting user-friendly
- [ ] FAQ covers common questions

---

### Task 08: Create Release Notes Template

Create a template for consistent release notes.

**Files:**
- `docs/RELEASE_NOTES_TEMPLATE.md`
- `mobile/.github/RELEASE_TEMPLATE.md`

**Requirements:**
- Version number section
- New features section
- Bug fixes section
- Known issues section
- Upgrade instructions
- Screenshots (for major releases)
- Download links
- Migration guide (for breaking changes)

**Acceptance Criteria:**
- [ ] Template includes all sections
- [ ] Sections clearly defined
- [ ] Formatting consistent
- [ ] Upgrade instructions clear
- [ ] Migration guide template included

---

## Verification Criteria

### Functional Verification
- [ ] **V-01:** Mobile app builds for iOS (EAS)
- [ ] **V-02:** Mobile app builds for Android (EAS)
- [ ] **V-03:** Menu bar app builds for macOS
- [ ] **V-04:** Menu bar app builds for Windows
- [ ] **V-05:** CI/CD pipelines run successfully
- [ ] **V-06:** Homebrew formula installs correctly
- [ ] **V-07:** Documentation is clear and accurate
- [ ] **V-08:** Release notes template is usable

### Documentation Quality
- [ ] **V-09:** All procedures are reproducible
- [ ] **V-10:** Screenshots/diagrams included where helpful
- [ ] **V-11:** Troubleshooting covers common issues
- [ ] **V-12:** Prerequisites are clearly listed

---

## must_haves

### Goal-Backward Requirements (Phase 65 Success Criteria)
1. **Mobile deployment ready** - TestFlight and Google Play configured
2. **Menu bar deployment ready** - Homebrew formula created
3. **Documentation complete** - User and deployment guides created

### Plan-Specific must_haves
1. **M-01:** Mobile build settings configured
2. **M-02:** Mobile CI/CD pipeline
3. **M-03:** Menu bar CI/CD pipeline
4. **M-04:** Homebrew formula
5. **M-05:** Mobile deployment documentation
6. **M-06:** Menu bar deployment documentation
7. **M-07:** Mobile user guide
8. **M-08:** Release notes template

---

## Success Metrics

- Mobile app builds successfully for iOS and Android
- Menu bar app builds successfully for macOS and Windows
- CI/CD pipelines pass all tests and builds
- Documentation is clear and comprehensive
- First deployment completes without issues

---

## Estimated Duration

**3-4 days** (8 tasks, ~3-4 hours each)

---

## Notes

- Use EAS Build for iOS and Android builds
- CodePush for over-the-air updates
- GitHub Actions for CI/CD
- Homebrew requires maintaining a tap
- macOS notarization is required for distribution
- Windows code signing requires a certificate
- Consider using semantic versioning
- Store screenshots in appropriate sizes
- App store descriptions need optimization (ASO)
